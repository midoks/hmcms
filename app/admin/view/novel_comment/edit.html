{include file="app/admin/view/common/header_head.html" /}
<style type="text/css">
.layui-form-item .layui-input-inline{
    width: auto;
    margin-left: 5px;
}
.type-input{
    height:70px;
    overflow-y: auto;
}
.type-input::-webkit-scrollbar {
    /*滚动条整体样式*/
    width : 10px;  /*高宽分别对应横竖滚动条的尺寸*/
    height: 1px;
}
.type-input::-webkit-scrollbar-thumb {
    /*滚动条里面小方块*/
    border-radius: 10px;
    box-shadow   : inset 0 0 5px rgba(0, 0, 0, 0.2);
    background   : #666;
}
.type-input::-webkit-scrollbar-track {
    /*滚动条里面轨道*/
    box-shadow   : inset 0 0 5px rgba(0, 0, 0, 0.2);
    border-radius: 10px;
    background   : #ededed;
}
.layui-form-radio{
    margin: 0; 
    padding-right: 0;
}

.layui-form-pane .layui-form-checkbox {
    margin: 4px 0 4px 1px;
}
.layui-form-checkbox[lay-skin=primary] span {
    padding-right: 4px;
}
.layui-form-checkbox[lay-skin=primary] i {
    left: 6px;
}
.layui-form-item .layui-col-xs12{
    margin-top: 10px;
}
@media screen and (max-width: 990px){
    .layui-form-item .layui-col-xs12:first-child{
        margin-top: 0px;
    }
    .layui-form-item{
        margin-bottom: 10px; 
    }
}
</style>
<!-- start -->

<div class="layui-fluid" style="background-color: white;">
    <form class="layui-form layui-form-pane" action="{:url('comic/save')}">
        <div class="layui-form-item">
            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">分类</label>
                <div class="layui-input-block">
                    <select name="cid">
                        <option value="">选择分类</option>
                        {volist name="classData" id="row" key="k"}

                        {if isset($data['cid']) && $row['id'] == $data['cid']}
                        <option value="{$row['id']}" selected>{$row['name']}</option>
                        {else}
                        <option value="{$row['id']}">{$row['name']}</option>
                        {/if}

                        {/volist}
                    </select>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-md2">
                <label class="layui-form-label">状态</label>
                <div class="layui-input-block">
                    <select name="serialize">
                        <option value="完结">已完结</option>
                        <option value="连载">连载中</option>
                    </select>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-md2">
                <label class="layui-form-label">是否锁定</label>
                <div class="layui-input-block">
                    <select name="sid">
                        <option value="0">未锁</option>
                        <option value="1">已锁</option>
                    </select>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-md2">
                <label class="layui-form-label">是否推荐</label>
                <div class="layui-input-block">
                    <select name="tid">
                        <option value="0">未推</option>
                        <option value="1">已推</option>
                    </select>
                </div>
            </div>

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label" style="width: 200px;">是否人工推荐(banner)</label>
                <div class="layui-input-block" style="margin-left: 200px;">
                    <select name="ttid">
                        <option value="0">未推</option>
                        <option value="1">已推</option>
                    </select>
                </div>
            </div>

        </div>
        <div class="layui-form-item">
            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">名称</label>
                <div class="layui-input-block">
                    <input type="text" name="name" required lay-verify="required" class="layui-input" value="{$data['name']|default=''}" placeholder="请输入名称">
                </div>
            </div>

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">英文</label>
                <div class="layui-input-block">
                    <input type="text" name="name_en" class="layui-input" value="{$data['name_en']|default=''}" placeholder="请输入漫画英文别名">
                </div>
            </div>

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">副标</label>
                <div class="layui-input-block">
                    <input type="text" name="sub" class="layui-input" value="{$data['sub']|default=''}" placeholder="请输入副标">
                </div>
            </div>

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-block">
                    <input type="text" name="remarks" class="layui-input" value="{$data['score']|default=''}" placeholder="备注">
                </div>
            </div>
            
        </div>

        <div class="layui-form-item">

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">导演</label>
                <div class="layui-input-block">
                    <input type="text" name="director" class="layui-input" value="{$data['director']|default=''}" placeholder="请输入导演">
                </div>
            </div>

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">演员</label>
                <div class="layui-input-block">
                    <input type="text" name="actor" required lay-verify="required" class="layui-input" value="{$data['actor']|default=''}" placeholder="请输入演员">
                </div>
            </div>

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">编剧</label>
                <div class="layui-input-block">
                    <input type="text" name="writer" class="layui-input" value="{$data['writer']|default=''}" placeholder="请输入编剧">
                </div>
            </div>

            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">幕后</label>
                <div class="layui-input-block">
                    <input type="text" name="behind" class="layui-input" value="{$data['behind']|default=''}" placeholder="请输入幕后">
                </div>
            </div>
            
        </div>
        <div class="layui-form-item">
            <div class="layui-col-xs12 layui-col-md6">
                <label class="layui-form-label">竖版封面</label>
                <div class="layui-input-block">
                    <input type="text" id="pic" name="pic" class="layui-input" placeholder="请上传竖版封面或者输入图片URL" value="{$data['pic']|default=''}">
                    <div class="layui-btn layui-btn-normal uppic" style="position: absolute;top: 0px;right: 0;">封面上传</div>
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-md6">
                <label class="layui-form-label">横版封面</label>
                <div class="layui-input-block">
                    <input type="text" id="picx" name="picx" class="layui-input" placeholder="请上传横版封面或者输入图片URL" value="{$data['picx']|default='0'}">
                    <div class="layui-btn layui-btn-normal uppicx" style="position: absolute;top: 0px;right: 0;">封面上传</div>
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">日人气</label>
                <div class="layui-input-block">
                    <input type="number" name="rhits" class="layui-input" value="{$data['rhits']|default='0'}" placeholder="请输入日人气">
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">周人气</label>
                <div class="layui-input-block">
                    <input type="number" name="zhits" class="layui-input" value="{$data['zhits']|default='0'}" placeholder="请输入周人气">
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">月人气</label>
                <div class="layui-input-block">
                    <input type="number" name="yhits" class="layui-input" value="{$data['yhits']|default='0'}" placeholder="请输入月人气">
                </div>
            </div>
            <div class="layui-col-xs12 layui-col-md3">
                <label class="layui-form-label">总人气</label>
                <div class="layui-input-block">
                    <input type="number" name="hits" class="layui-input" value="{$data['hits']|default='0'}" placeholder="请输入总人气">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-col-xs12 layui-col-md12">
                <label class="layui-form-label">短简介</label>
                <div class="layui-input-block">
                    <input type="text" name="text" class="layui-input" value="{$data['text']|default=''}" placeholder="一句话介绍，10个字以内">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">简介</label>
            <div class="layui-input-block">
                <textarea id="editor2" name="content" placeholder="简介" class="layui-textarea" style="min-height:100px;">{$data['content']|default=''}</textarea>
            </div>
        </div>

        <div class="layui-col-xs12 layui-col-md2">
            <label class="layui-form-label">审核</label>
            <div class="layui-input-block">
                <select name="status" lay-filter="status">
                    <option value="0" {if isset($data['status']) && $data['status']==0}selected{/if}>已通过</option>
                    <option value="1" {if isset($data['status']) && $data['status']==1}selected{/if}>待审核</option>
                    <option value="2" {if isset($data['status']) && $data['status']==2}selected{/if}>未通过</option>
                </select>
            </div>
        </div>
        <div id="status" class="layui-col-xs12 layui-col-md8">
            <label class="layui-form-label">未通过原因</label>
            <div class="layui-input-block">
                <input type="text" name="msg" class="layui-input" value="{$data['msg']|default=''}" placeholder="请输入未通过原因">
            </div>
        </div>

        <div class="layui-col-xs12 layui-col-md2">
            <div class="layui-form-item">
                <div class="layui-input-block" style="margin-left: 0px;">
                    <input type="checkbox" name="update_time" title="更新时间">
                </div>
            </div>
        </div>

        <div class="layui-form-item" style="text-align: center;padding: 5px;">
            <input type="hidden" name="id" value="{$data['id']|default='0'}">
            <button class="layui-btn" lay-filter="submit_save" lay-submit>保存</button>
            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
    </form>
</div>

<!-- end -->

<script type="text/javascript">
layui.config({base: '{__STATIC__}/admin/layuiadmin/'}).use(['table','jquery'], function(){
///
var admin = layui.admin
,$ = layui.$
,form = layui.form
,table = layui.table,
upload = layui.upload;

upload.render({
    elem: '.uppic',
    url: "{:url('common/uploadComicCover')}?id={$data['id']}",
    accept: 'file',
    acceptMime: 'image/*',
    exts: 'jpg|gif|png|jpeg|bmp|webp',
    done: function(res){
        if(res.code == 1){
            layer.msg(res.msg,{icon: 1});
            $('#pic').val(res['data']['url']);
        } else {
            layer.msg(res.msg,{icon: 2});
        }
    }
});


upload.render({
    elem: '.uppicx',
    url: "{:url('common/uploadComicCoverX')}?id={$data['id']}",
    accept: 'file',
    acceptMime: 'image/*',
    exts: 'jpg|gif|png|jpeg|bmp|webp',
    done: function(res){
        if(res.code == 1){
            layer.msg(res.msg,{icon: 1});
            $('#picx').val(res['data']['url']);
        } else {
            layer.msg(res.msg,{icon: 2});
        }
    }
});

//
});
    
</script>
</body>
</html>


