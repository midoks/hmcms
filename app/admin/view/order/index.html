{include file="app/admin/view/common/header.html" /}

<div class="layui-fluid">
    <div class="layui-col-md12" style="padding: 5px;">
        <div class="layui-card">
            
            <div class="layui-card-body">
                <div class="layui-form toolbar" style="margin-top: 10px;margin-bottom: 10px;">
                    <div class="layui-inline mr0" >
                        <button class="layui-btn layui-btn-sm layui-btn-danger" onclick="Admin.batchDel('{:url('order/batchDel')}','order')">批量删除</button>
                    </div>

                    <div class="layui-inline select100 mr0">
                        <div class="layui-input-inline h30" style="width: 90px;">
                            <select name="pid">
                                <option value="">状态</option>
                                <option value="1">未完成</option>
                                <option value="2">已完成</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-inline mr0">
                        <div class="layui-input-inline mr0">
                            <input name="times" class="layui-input date-icon h30" type="text" placeholder="请选择日期范围" autocomplete="off" lay-key="1">
                        </div>
                    </div>


                    <div class="layui-inline select100 mr0">
                        <div class="layui-input-inline h30">
                            <select name="zd">
                                <option value="dd">订单号</option>
                                <option value="uid">会员ID</option>
                                <option value="id">订单ID</option>
                                <option value="text">订单备注</option>
                                <option value="channel">渠道</option>
                                <option value="type">来源</option>
                            </select>
                        </div>
                    </div>

                    <div class="layui-inline mr0">
                        <div class="layui-input-inline mr0">
                            <input type="text" name="key" placeholder="请输入关键字" autocomplete="off" class="layui-input h30" value="">
                        </div>
                    </div>

                    <div class="layui-inline mr0">
                        <button class="layui-btn layui-btn-sm" data-id="order" lay-submit lay-filter="table-sreach"><i class="layui-icon">&#xe615;</i>搜索
                        </button>
                    </div>
                </div>
                <div id="order"></div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">

layui.config({base: '{__STATIC__}/admin/layuiadmin/'}).use(['table','jquery'], function(){
///
var admin = layui.admin
,$ = layui.$
,form = layui.form
,table = layui.table;

table.render({
    elem: '#order',
    url: '{:url("order/list")}',
    defaultToolbar: [],
    title: '数据表',
    cols: [[
        {type: 'checkbox', fixed: 'left'},
        {field:'id', title:'订单ID', width:100},
        {field:'uid', title:'会员ID',width:100},
        {field:'dd', title:'订单号',width:200},
        {field:'rmb', title:'金额',width:100},
        {field:'text', title:'备注',width:200},
        {field:'pid', title:'状态', toolbar: '#pidTpl',width:100},
        {field:'type', title:'来源',width:100},
        {field:'channel', title:'渠道',width:100},
        {field:'zd', title:'参数'},
        {field:'create_time', title:'下单时间',width:162,},
        {field:'update_time', title:'完成时间',width:162,},
        {title:'操作', toolbar: '#cmdTpl', width:90, fixed: 'right'}
     ]],
    page: true
});

///
});
</script>


<script type="text/html" id="pidTpl">
    {{#  if(d.pid == 1){ }}
    <span class="layui-btn layui-btn-xs">已完成</span>
    {{#  } else { }}
    <span class="layui-btn layui-btn-xs layui-btn-danger">未完成</span>
    {{#  } }}
</script>

<script type="text/html" id="cmdTpl">
    <a class="layui-btn layui-btn-danger layui-btn-xs" onclick="Admin.del(this, '{:url('order/del')}','{{d.id}}')">删除</a>
</script>


{include file="app/admin/view/common/footer.html" /}